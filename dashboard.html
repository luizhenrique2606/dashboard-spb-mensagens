<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalog Exchange</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
        }
        .nupag-card {
            background: linear-gradient(90deg, #495057 0%, #6c757d 50%, #868e96 100%);
            color: white;
        }
        .nufin-card {
            background: linear-gradient(90deg, #4A148C 0%, #6A1B9A 50%, #8A05BE 100%);
            color: white;
        }
        .nuinvest-card {
            background: linear-gradient(90deg, #e55100 0%, #fd7e14 50%, #ff922b 100%);
            color: white;
        }
        .rco-card {
            background: linear-gradient(90deg, #20c997 0%, #28a745 50%, #40c057 100%);
            color: white;
        }
        .header {
            background: linear-gradient(90deg, #4A148C 0%, #6A1B9A 50%, #8A05BE 100%);
            color: white;
            padding: 1.2rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(74, 20, 140, 0.6);
        }
        .status-badge {
            font-size: 0.8rem;
            padding: 0.3rem 0.6rem;
        }
        .table-responsive {
            border-radius: 15px;
            overflow: hidden;
        }
        .refresh-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .loading {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }
        .nu-logo {
            font-size: 4rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            animation: pulse 2s infinite;
            display: inline-block;
            margin-right: 1rem;
        }
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }
        .header-title {
            color: white;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="mb-0 header-title">
                        <span class="nu-logo">NU</span>
                        Messages (Catalog Exchange)
                    </h1>
                    <small class="text-white-50">
                        <i class="fas fa-sync-alt me-1" id="auto-refresh-icon"></i>
                        <span id="auto-refresh-status">Auto-refresh: ativo</span> | 
                        Última atualização: <span id="last-update">Carregando...</span>
                    </small>
                    
                    <!-- Botão do cabeçalho removido -->
                </div>
                <div class="col-auto">
                    <div id="total-messages-counter" class="badge bg-white text-dark" style="font-size: 0.9em; padding: 0.5rem 0.8rem; border-radius: 8px; font-weight: bold;">
                        Total Messages: <span id="total-messages-count">0</span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="container">
        <!-- Métricas Principais -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <div class="card nupag-card">
                    <div class="card-body text-center py-4">
                        <div class="d-flex justify-content-center align-items-center mb-3">
                            <h2 class="mb-0" id="nupag-counter">0</h2>
                    </div>
                        <h4 class="card-title fw-bold mb-2">STR</h4>
                        <p class="card-text mb-0">STR - Transferência de Reserva</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card nufin-card">
                    <div class="card-body text-center py-4">
                        <div class="d-flex justify-content-center align-items-center mb-3">
                            <h2 class="mb-0" id="nufin-counter">0</h2>
                    </div>
                        <h4 class="card-title fw-bold mb-2">LPI</h4>
                        <p class="card-text mb-0">LPI - Pagamentos Instantâneos</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card nuinvest-card">
                    <div class="card-body text-center py-4">
                        <div class="d-flex justify-content-center align-items-center mb-3">
                            <h2 class="mb-0" id="nuinvest-counter">0</h2>
                        </div>
                        <h4 class="card-title fw-bold mb-2">SME</h4>
                        <p class="card-text mb-0">SME - Moeda Eletrônica</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card rco-card">
                    <div class="card-body text-center py-4">
                        <div class="d-flex justify-content-center align-items-center mb-3">
                            <h2 class="mb-0" id="rco-counter">0</h2>
                        </div>
                        <h4 class="card-title fw-bold mb-2">RCO</h4>
                        <p class="card-text mb-0">RCO - Recolhimento Compulsório</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs mb-4" id="dashboardTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="payments-tab" data-bs-toggle="tab" data-bs-target="#payments" type="button" role="tab">
                    <i class="fas fa-credit-card me-2"></i>
                    <strong>Payment Message List</strong>
                    <span id="payment-nav-counter" class="badge bg-primary ms-2" style="font-size: 0.7em;">
                        <span id="payment-nav-count">0</span>/<span id="payment-nav-total">0</span>
                    </span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="receipt-tab" data-bs-toggle="tab" data-bs-target="#receipt" type="button" role="tab">
                    <i class="fas fa-receipt me-2"></i>
                    <strong>Receive Message List - R2</strong>
                    <span id="r2-nav-counter" class="badge bg-primary ms-2" style="font-size: 0.7em;">
                        <span id="r2-nav-count">0</span>/<span id="r2-nav-total">0</span>
                    </span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="ldl-tab" data-bs-toggle="tab" data-bs-target="#ldl" type="button" role="tab">
                    <i class="fas fa-database me-2"></i>
                    <strong>Message LDL</strong>
                    <span id="ldl-nav-counter" class="badge bg-primary ms-2" style="font-size: 0.7em;">
                        <span id="ldl-nav-count">0</span>/<span id="ldl-nav-total">0</span>
                    </span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="ltr-tab" data-bs-toggle="tab" data-bs-target="#ltr" type="button" role="tab">
                    <i class="fas fa-file-alt me-2"></i>
                    <strong>Message LTR</strong>
                    <span id="ltr-nav-counter" class="badge bg-primary ms-2" style="font-size: 0.7em;">
                        <span id="ltr-nav-count">0</span>/<span id="ltr-nav-total">0</span>
                    </span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="slb-tab" data-bs-toggle="tab" data-bs-target="#slb" type="button" role="tab">
                    <i class="fas fa-balance-scale me-2"></i>
                    <strong>Message SLB</strong>
                    <span id="slb-nav-counter" class="badge bg-primary ms-2" style="font-size: 0.7em;">
                        <span id="slb-nav-count">0</span>/<span id="slb-nav-total">0</span>
                    </span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="sel-tab" data-bs-toggle="tab" data-bs-target="#sel" type="button" role="tab">
                    <i class="fas fa-exchange-alt me-2"></i>
                    <strong>Message SEL</strong>
                    <span id="sel-nav-counter" class="badge bg-primary ms-2" style="font-size: 0.7em;">
                        <span id="sel-nav-count">0</span>/<span id="sel-nav-total">0</span>
                    </span>
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="dashboardTabContent">
            <!-- PAYMENTS TAB -->
            <div class="tab-pane fade show active" id="payments" role="tabpanel">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title d-flex align-items-center mb-4">
                                    <i class="fas fa-credit-card me-2"></i>
                                    Payment Message List
                                    <span id="payment-counter" class="badge bg-primary ms-3" style="font-size: 0.8em;">
                                        <i class="fas fa-check-circle me-1"></i>
                                        <span id="payment-count">0</span>/<span id="payment-total">0</span>
                                    </span>
                                </h5>
                        <div class="row">
                            <!-- Grupo STR -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Pagamentos > Nu Financeira
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0007</span>
                                        <span class="badge bg-secondary" id="status-STR0007">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0006</span>
                                        <span class="badge bg-secondary" id="status-STR0006">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0004</span>
                                        <span class="badge bg-secondary" id="status-STR0004">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0008</span>
                                        <span class="badge bg-secondary" id="status-STR0008">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0010</span>
                                        <span class="badge bg-secondary" id="status-STR0010">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0013</span>
                                        <span class="badge bg-secondary" id="status-STR0013">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0025</span>
                                        <span class="badge bg-secondary" id="status-STR0025">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0026</span>
                                        <span class="badge bg-secondary" id="status-STR0026">Pendente</span>
                                    </div>
                                    
                                    <!-- R2 Nu Pagamentos removido -->
                                    
                                    <!-- Título LPI -->
                                    <h6 class="fw-bold text-dark mt-4 mb-3" style="border-top: 1px solid rgba(0,0,0,0.2); padding-top: 15px;">
                                        <i class="fas fa-coins me-2"></i>LPI - Pagamentos Instantâneos
                                    </h6>
                                    
                                    <!-- Mensagens LPI -->
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LPI0001</span>
                                        <span class="badge bg-secondary" id="status-LPI0001">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LPI0002</span>
                                        <span class="badge bg-secondary" id="status-LPI0002">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LPI0003</span>
                                        <span class="badge bg-secondary" id="status-LPI0003">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LPI0004</span>
                                        <span class="badge bg-secondary" id="status-LPI0004">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LPI0005</span>
                                        <span class="badge bg-secondary" id="status-LPI0005">Pendente</span>
                                    </div>
                                    
                                    <!-- Título SME -->
                                    <h6 class="fw-bold text-dark mt-4 mb-3" style="border-top: 1px solid rgba(0,0,0,0.2); padding-top: 15px;">
                                        <i class="fas fa-wallet me-2"></i>SME - Moeda Eletrônica
                                    </h6>
                                    
                                    <!-- Mensagens SME -->
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SME0001</span>
                                        <span class="badge bg-secondary" id="status-SME0001">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SME0002</span>
                                        <span class="badge bg-secondary" id="status-SME0002">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SME0003</span>
                                        <span class="badge bg-secondary" id="status-SME0003">Pendente</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo Nu Financeira -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-university me-2"></i>Nu Financeira > Nu Invest
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0007</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0007">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0006</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0006">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0004</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0004">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0008</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0008">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0013</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0013">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0025</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0025">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0026</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0026">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0047</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0047">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0052</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0052">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0010</span>
                                        <span class="badge bg-secondary" id="status-nufin-STR0010">Pendente</span>
                                    </div>
                                    
                                    <!-- R2 Nu Financeira removido -->
                                    
                                    <!-- Título RCO -->
                                    <h6 class="fw-bold text-dark mt-4 mb-3" style="border-top: 1px solid rgba(0,0,0,0.2); padding-top: 15px;">
                                        <i class="fas fa-piggy-bank me-2"></i>RCO - Recolhimento de Compulsório
                                    </h6>
                                    
                                    <!-- Mensagens RCO -->
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">RCO0010</span>
                                        <span class="badge bg-secondary" id="status-RCO0010">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">RCO0011</span>
                                        <span class="badge bg-secondary" id="status-RCO0011">Pendente</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo Nu Invest -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-chart-line me-2"></i>Nu Invest > Nu Pagamentos
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0007</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0007">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0006</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0006">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0004</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0004">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0008</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0008">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0013</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0013">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0025</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0025">Pendente</span>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0010</span>
                                        <span class="badge bg-secondary" id="status-nuinvest-STR0010">Pendente</span>
                                    </div>
                                    
                                    <!-- R2 Nu Invest removido -->
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                    </div>
                </div>
            </div>

            <!-- RECEIPT TAB -->
            <div class="tab-pane fade" id="receipt" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title d-flex align-items-center mb-4">
                            <i class="fas fa-receipt me-2"></i>
                            Receive Message List - R2
                            <span id="r2-counter" class="badge bg-primary ms-3" style="font-size: 0.8em;">
                                <i class="fas fa-check-circle me-1"></i>
                                <span id="r2-count">0</span>/<span id="r2-total">0</span>
                            </span>
                        </h5>
                        <!-- Botão para marcar todas R2 como efetivadas -->
                        <div class="row mb-3">
                            <div class="col-12">
                                <button class="btn btn-success" onclick="marcarTodasR2Efetivadas()">
                                    <i class="fas fa-check-circle me-2"></i>
                                    R2 Efetivados
                                </button>
                            </div>
                        </div>
                        
                        <div class="row">
                            <!-- Grupo STR R2 Nu Pagamentos -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Pagamentos
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0007R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0007R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0006R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0006R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0004R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0004R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0008R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0008R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0025R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0025R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0026R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0026R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0047R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0047R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0052R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0052R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0010R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0010R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo STR R2 Nu Financeira -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Financeira
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0007R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0007R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0006R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0006R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0004R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0004R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0008R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0008R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0025R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0025R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0026R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0026R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0010R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0010R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo STR R2 Nu Invest -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Invest
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0007R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0007R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0006R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0006R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0004R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0004R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0008R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0008R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0025R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0025R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0026R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0026R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">STR0010R2</span>
                                        <select class="form-select form-select-sm r2-status-select" style="width: 120px;" onchange="alterarStatusR2(this, 'STR0010R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LDL TAB -->
            <div class="tab-pane fade" id="ldl" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-12">
                                <h5 class="card-title d-flex align-items-center">
                                    <i class="fas fa-database me-2"></i>
                                    Message LDL - Liquidação de Depósitos
                                    <span id="ldl-counter" class="badge bg-primary ms-3" style="font-size: 0.8em;">
                                        <i class="fas fa-check-circle me-1"></i>
                                        <span id="ldl-count">0</span>/<span id="ldl-total">0</span>
                                    </span>
                                </h5>
                                <p class="text-muted">Monitoramento das mensagens de liquidação de depósitos entre as instituições.</p>
                                <button class="btn btn-success" onclick="marcarTodasLDLEfetivadas()">
                                    <i class="fas fa-check-circle me-2"></i>
                                    LDL Efetivados
                                </button>
                            </div>
                        </div>
                        
                        <div class="row">
                            <!-- Grupo LDL Nu Pagamentos -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Pagamentos
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0021</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0021')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0022</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0022')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0022R2</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0022R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0004</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0004')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo LDL Nu Financeira -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-university me-2"></i>Nu Financeira
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0021</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0021-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0022</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0022-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0022R2</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0022R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0004</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0004-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo LDL Nu Invest -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-chart-line me-2"></i>Nu Invest
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0001</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0001-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0003</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0003-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0009R2</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0009R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0021</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0021-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0022</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0022-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0022R2</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0022R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0024</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0024-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0028</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0028-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LDL0029</span>
                                        <select class="form-select form-select-sm ldl-status-select" style="width: 120px;" onchange="alterarStatusLDL(this, 'LDL0029-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LTR TAB -->
            <div class="tab-pane fade" id="ltr" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-12">
                                <h5 class="card-title d-flex align-items-center">
                                    <i class="fas fa-file-alt me-2"></i>
                                    Message LTR - Liquidação de Transferências
                                    <span id="ltr-counter" class="badge bg-primary ms-3" style="font-size: 0.8em;">
                                        <i class="fas fa-check-circle me-1"></i>
                                        <span id="ltr-count">0</span>/<span id="ltr-total">0</span>
                                    </span>
                                </h5>
                                <p class="text-muted">Monitoramento das mensagens de liquidação de transferências entre as instituições.</p>
                                <button class="btn btn-success" onclick="marcarTodasLTREfetivadas()">
                                    <i class="fas fa-check-circle me-2"></i>
                                    LTR Efetivados
                                </button>
                            </div>
                        </div>
                        
                        <div class="row">
                            <!-- Grupo LTR Nu Pagamentos -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Pagamentos
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0001</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0001')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0004</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0004')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0005R2</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0005R2')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo LTR Nu Financeira -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-university me-2"></i>Nu Financeira
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0001</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0001-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0004</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0004-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0005R2</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0005R2-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0006</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0006-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo LTR Nu Invest -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-chart-line me-2"></i>Nu Invest
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0001</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0001-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0004</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0004-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">LTR0005R2</span>
                                        <select class="form-select form-select-sm ltr-status-select" style="width: 120px;" onchange="alterarStatusLTR(this, 'LTR0005R2-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SLB TAB -->
            <div class="tab-pane fade" id="slb" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-12">
                                <h5 class="card-title d-flex align-items-center">
                                    <i class="fas fa-balance-scale me-2"></i>
                                    Message SLB - Sistema de Liquidação Bruta
                                    <span id="slb-counter" class="badge bg-primary ms-3" style="font-size: 0.8em;">
                                        <i class="fas fa-check-circle me-1"></i>
                                        <span id="slb-count">0</span>/<span id="slb-total">0</span>
                                    </span>
                                </h5>
                                <p class="text-muted">Monitoramento das mensagens do Sistema de Liquidação Bruta entre as instituições.</p>
                                <button class="btn btn-success" onclick="marcarTodasSLBEfetivadas()">
                                    <i class="fas fa-check-circle me-2"></i>
                                    SLB Efetivados
                                </button>
                            </div>
                        </div>
                        
                        <div class="row">
                            <!-- Grupo SLB Nu Pagamentos -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-exchange-alt me-2"></i>Nu Pagamentos
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0001</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0001')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0002</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0002')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0005</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0005')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo SLB Nu Financeira -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-university me-2"></i>Nu Financeira
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0001</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0001-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0002</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0002-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0005</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0005-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo SLB Nu Invest -->
                            <div class="col-md-4 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-chart-line me-2"></i>Nu Invest
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0001</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0001-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0002</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0002-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SLB0005</span>
                                        <select class="form-select form-select-sm slb-status-select" style="width: 120px;" onchange="alterarStatusSLB(this, 'SLB0005-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEL TAB -->
            <div class="tab-pane fade" id="sel" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-12">
                                <h5 class="card-title d-flex align-items-center">
                                    <i class="fas fa-exchange-alt me-2"></i>
                                    Message SEL - Sistema de Liquidação Eletrônica
                                    <span id="sel-counter" class="badge bg-primary ms-3" style="font-size: 0.8em;">
                                        <i class="fas fa-check-circle me-1"></i>
                                        <span id="sel-count">0</span>/<span id="sel-total">0</span>
                                    </span>
                                </h5>
                                <p class="text-muted">Monitoramento das mensagens do Sistema de Liquidação Eletrônica entre as instituições.</p>
                                <button class="btn btn-success" onclick="marcarTodasSELEfetivadas()">
                                    <i class="fas fa-check-circle me-2"></i>
                                    SEL Efetivados
                                </button>
                            </div>
                        </div>
                        
                        <div class="row">
                            <!-- Grupo SEL Nu Financeira -->
                            <div class="col-md-6 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-university me-2"></i>Nu Financeira
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1056</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1056-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1611</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1611-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1054</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1054-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1069</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1069-nufin')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Grupo SEL Nu Invest -->
                            <div class="col-md-6 mb-4">
                                <h6 class="fw-bold text-dark mb-3">
                                    <i class="fas fa-chart-line me-2"></i>Nu Invest
                                </h6>
                                <div class="message-group">
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1056</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1056-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1611</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1611-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1054</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1054-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                    <div class="message-item d-flex justify-content-between align-items-center mb-2 p-2 border rounded">
                                        <span class="message-code">SEL1069</span>
                                        <select class="form-select form-select-sm sel-status-select" style="width: 120px;" onchange="alterarStatusSEL(this, 'SEL1069-nuinvest')">
                                            <option value="Pendente" selected>Pendente</option>
                                            <option value="Efetivado">Efetivado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botões removidos -->

    <script>
    // Função para atualizar contador R2
    function atualizarContadorR2() {
        // Contar todas as mensagens com dropdowns na aba R2
        const r2Selects = document.querySelectorAll('#receipt .form-select');
        const totalR2 = r2Selects.length;
        const efetivadosR2 = Array.from(r2Selects).filter(select => select.value === 'Efetivado').length;
        
        // Atualizar contador do conteúdo da aba
        document.getElementById('r2-count').textContent = efetivadosR2;
        document.getElementById('r2-total').textContent = totalR2;
        
        // Atualizar contador da navegação
        document.getElementById('r2-nav-count').textContent = efetivadosR2;
        document.getElementById('r2-nav-total').textContent = totalR2;
        
        // Mudar cor do badge baseado na porcentagem
        const contadorContent = document.getElementById('r2-counter');
        const contadorNav = document.getElementById('r2-nav-counter');
        
        if (efetivadosR2 === totalR2 && totalR2 > 0) {
            contadorContent.className = 'badge bg-success ms-3';
            contadorNav.className = 'badge bg-success ms-2';
        } else if (efetivadosR2 > 0) {
            contadorContent.className = 'badge bg-warning ms-3';
            contadorNav.className = 'badge bg-warning ms-2';
        } else {
            contadorContent.className = 'badge bg-primary ms-3';
            contadorNav.className = 'badge bg-primary ms-2';
        }
        
        console.log(`📨 R2 Counter: ${efetivadosR2}/${totalR2} efetivados`);
        
        // Atualizar contador total
        atualizarContadorTotal();
    }

    // Função para marcar todas as mensagens R2 como efetivadas
    function marcarTodasR2Efetivadas() {
        // Selecionar todos os dropdowns de status R2
        document.querySelectorAll('.r2-status-select').forEach(select => {
            select.value = 'Efetivado';
            // Usar o mesmo verde forte do botão Bootstrap btn-success
            select.style.backgroundColor = '#198754';
            select.style.color = '#ffffff';
            select.style.fontWeight = 'bold';
        });
        
        // Atualizar contador após marcar todas
        atualizarContadorR2();
        
        // Mostrar mensagem de confirmação
        alert('✅ Todas as mensagens R2 foram marcadas como Efetivadas!');
    }
    
    // Função para alterar status individual de mensagem R2
    function alterarStatusR2(selectElement, messageId) {
        const status = selectElement.value;
        
        if (status === 'Efetivado') {
            // Verde forte igual ao botão Bootstrap btn-success
            selectElement.style.backgroundColor = '#198754';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'bold';
        } else {
            // Cinza padrão quando pendente
            selectElement.style.backgroundColor = '#6c757d';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'normal';
        }
        
        // Atualizar contador após mudança individual
        atualizarContadorR2();
        
        console.log(`Status da mensagem ${messageId} alterado para: ${status}`);
    }

    // Função para atualizar contador Payment
    function atualizarContadorPayment() {
        // Contar todas as mensagens com badges na aba Payment (STR, LPI, SME, RCO)
        // Excluir o próprio contador da contagem
        const paymentBadges = document.querySelectorAll('#payments .badge:not(#payment-counter):not(#payment-nav-counter)');
        const totalPayment = paymentBadges.length;
        const efetivadosPayment = Array.from(paymentBadges).filter(badge => 
            badge.classList.contains('bg-success') || badge.textContent.trim() === 'Efetivado'
        ).length;
        
        // Atualizar contador do conteúdo da aba
        document.getElementById('payment-count').textContent = efetivadosPayment;
        document.getElementById('payment-total').textContent = totalPayment;
        
        // Atualizar contador da navegação
        document.getElementById('payment-nav-count').textContent = efetivadosPayment;
        document.getElementById('payment-nav-total').textContent = totalPayment;
        
        // Mudar cor do badge baseado na porcentagem
        const contadorContent = document.getElementById('payment-counter');
        const contadorNav = document.getElementById('payment-nav-counter');
        
        if (efetivadosPayment === totalPayment && totalPayment > 0) {
            contadorContent.className = 'badge bg-success ms-3';
            contadorNav.className = 'badge bg-success ms-2';
        } else if (efetivadosPayment > 0) {
            contadorContent.className = 'badge bg-warning ms-3';
            contadorNav.className = 'badge bg-warning ms-2';
        } else {
            contadorContent.className = 'badge bg-primary ms-3';
            contadorNav.className = 'badge bg-primary ms-2';
        }
        
        console.log(`💳 Payment Counter: ${efetivadosPayment}/${totalPayment} efetivados`);
        
        // Atualizar contador total
        atualizarContadorTotal();
    }

    // Função para atualizar contador LDL
    function atualizarContadorLDL() {
        const ldlSelects = document.querySelectorAll('.ldl-status-select');
        const totalLDL = ldlSelects.length;
        const efetivadosLDL = Array.from(ldlSelects).filter(select => select.value === 'Efetivado').length;
        
        // Atualizar contador do conteúdo da aba
        document.getElementById('ldl-count').textContent = efetivadosLDL;
        document.getElementById('ldl-total').textContent = totalLDL;
        
        // Atualizar contador da navegação
        document.getElementById('ldl-nav-count').textContent = efetivadosLDL;
        document.getElementById('ldl-nav-total').textContent = totalLDL;
        
        // Mudar cor do badge baseado na porcentagem
        const contador = document.getElementById('ldl-counter');
        const contadorNav = document.getElementById('ldl-nav-counter');
        
        let corClasse = '';
        if (efetivadosLDL === totalLDL && totalLDL > 0) {
            corClasse = 'bg-success';
        } else if (efetivadosLDL > 0) {
            corClasse = 'bg-warning';
        } else {
            corClasse = 'bg-primary';
        }
        
        // Aplicar a mesma cor para ambos os contadores
        contador.className = `badge ${corClasse} ms-3`;
        contadorNav.className = `badge ${corClasse} ms-2`;
        contadorNav.style.fontSize = '0.7em';
        
        console.log(`📊 Contadores LDL atualizados: ${efetivadosLDL}/${totalLDL}`);
        
        // Atualizar contador total
        atualizarContadorTotal();
    }

    // Função para marcar todas as mensagens LDL como efetivadas
    function marcarTodasLDLEfetivadas() {
        document.querySelectorAll('.ldl-status-select').forEach(select => {
            select.value = 'Efetivado';
            select.style.backgroundColor = '#198754';
            select.style.color = '#ffffff';
            select.style.fontWeight = 'bold';
        });
        atualizarContadorLDL();
        alert('✅ Todas as mensagens LDL foram marcadas como Efetivadas!');
    }
    
    // Função para alterar status individual de mensagem LDL
    function alterarStatusLDL(selectElement, messageId) {
        const status = selectElement.value;
        
        if (status === 'Efetivado') {
            selectElement.style.backgroundColor = '#198754';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'bold';
        } else {
            selectElement.style.backgroundColor = '#6c757d';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'normal';
        }
        
        // Atualizar contador após mudança de status
        atualizarContadorLDL();
        
        console.log(`Status da mensagem LDL ${messageId} alterado para: ${status}`);
    }

    // Função para atualizar contador LTR
    function atualizarContadorLTR() {
        const ltrSelects = document.querySelectorAll('.ltr-status-select');
        const totalLTR = ltrSelects.length;
        const efetivadosLTR = Array.from(ltrSelects).filter(select => select.value === 'Efetivado').length;
        
        // Atualizar contador do conteúdo da aba
        document.getElementById('ltr-count').textContent = efetivadosLTR;
        document.getElementById('ltr-total').textContent = totalLTR;
        
        // Atualizar contador da navegação
        document.getElementById('ltr-nav-count').textContent = efetivadosLTR;
        document.getElementById('ltr-nav-total').textContent = totalLTR;
        
        // Mudar cor do badge baseado na porcentagem
        const contador = document.getElementById('ltr-counter');
        const contadorNav = document.getElementById('ltr-nav-counter');
        
        let corClasse = '';
        if (efetivadosLTR === totalLTR && totalLTR > 0) {
            corClasse = 'bg-success';
        } else if (efetivadosLTR > 0) {
            corClasse = 'bg-warning';
        } else {
            corClasse = 'bg-primary';
        }
        
        // Aplicar a mesma cor para ambos os contadores
        contador.className = `badge ${corClasse} ms-3`;
        contadorNav.className = `badge ${corClasse} ms-2`;
        contadorNav.style.fontSize = '0.7em';
        
        console.log(`📊 Contadores LTR atualizados: ${efetivadosLTR}/${totalLTR}`);
        
        // Atualizar contador total
        atualizarContadorTotal();
    }

    // Função para marcar todas as mensagens LTR como efetivadas
    function marcarTodasLTREfetivadas() {
        document.querySelectorAll('.ltr-status-select').forEach(select => {
            select.value = 'Efetivado';
            select.style.backgroundColor = '#198754';
            select.style.color = '#ffffff';
            select.style.fontWeight = 'bold';
        });
        
        // Atualizar contador após mudança em lote
        atualizarContadorLTR();
        
        alert('✅ Todas as mensagens LTR foram marcadas como Efetivadas!');
    }
    
    // Função para alterar status individual de mensagem LTR
    function alterarStatusLTR(selectElement, messageId) {
        const status = selectElement.value;
        
        if (status === 'Efetivado') {
            selectElement.style.backgroundColor = '#198754';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'bold';
        } else {
            selectElement.style.backgroundColor = '#6c757d';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'normal';
        }
        
        // Atualizar contador após mudança de status
        atualizarContadorLTR();
        
        console.log(`Status da mensagem LTR ${messageId} alterado para: ${status}`);
    }

    // Função para atualizar contador SLB
    function atualizarContadorSLB() {
        const slbSelects = document.querySelectorAll('.slb-status-select');
        const totalSLB = slbSelects.length;
        const efetivadosSLB = Array.from(slbSelects).filter(select => select.value === 'Efetivado').length;
        
        // Atualizar contador do conteúdo da aba
        document.getElementById('slb-count').textContent = efetivadosSLB;
        document.getElementById('slb-total').textContent = totalSLB;
        
        // Atualizar contador da navegação
        document.getElementById('slb-nav-count').textContent = efetivadosSLB;
        document.getElementById('slb-nav-total').textContent = totalSLB;
        
        // Mudar cor do badge baseado na porcentagem
        const contador = document.getElementById('slb-counter');
        const contadorNav = document.getElementById('slb-nav-counter');
        
        let corClasse = '';
        if (efetivadosSLB === totalSLB && totalSLB > 0) {
            corClasse = 'bg-success';
        } else if (efetivadosSLB > 0) {
            corClasse = 'bg-warning';
        } else {
            corClasse = 'bg-primary';
        }
        
        // Aplicar a mesma cor para ambos os contadores
        contador.className = `badge ${corClasse} ms-3`;
        contadorNav.className = `badge ${corClasse} ms-2`;
        contadorNav.style.fontSize = '0.7em';
        
        console.log(`📊 Contadores SLB atualizados: ${efetivadosSLB}/${totalSLB}`);
        
        // Atualizar contador total
        atualizarContadorTotal();
    }

    // Função para atualizar contador SEL
    function atualizarContadorSEL() {
        const selSelects = document.querySelectorAll('.sel-status-select');
        const totalSEL = selSelects.length;
        const efetivadosSEL = Array.from(selSelects).filter(select => select.value === 'Efetivado').length;
        
        // Atualizar contador do conteúdo da aba
        document.getElementById('sel-count').textContent = efetivadosSEL;
        document.getElementById('sel-total').textContent = totalSEL;
        
        // Atualizar contador da navegação
        document.getElementById('sel-nav-count').textContent = efetivadosSEL;
        document.getElementById('sel-nav-total').textContent = totalSEL;
        
        // Mudar cor do badge baseado na porcentagem
        const contadorConteudo = document.getElementById('sel-counter');
        const contadorNav = document.getElementById('sel-nav-counter');
        
        if (efetivadosSEL === totalSEL && totalSEL > 0) {
            contadorConteudo.className = 'badge bg-success ms-3';
            contadorNav.className = 'badge bg-success ms-2';
        } else if (efetivadosSEL > 0) {
            contadorConteudo.className = 'badge bg-warning ms-3';
            contadorNav.className = 'badge bg-warning ms-2';
        } else {
            contadorConteudo.className = 'badge bg-primary ms-3';
            contadorNav.className = 'badge bg-primary ms-2';
        }
        
        console.log(`Contador SEL atualizado: ${efetivadosSEL}/${totalSEL}`);
        
        // Atualizar contador total
        atualizarContadorTotal();
    }

    // Função para atualizar contador total de mensagens
    function atualizarContadorTotal() {
        // Contar mensagens de todas as abas
        const paymentBadges = document.querySelectorAll('#payments .badge:not(#payment-counter):not(#payment-nav-counter)');
        const r2Selects = document.querySelectorAll('#receipt .form-select');
        const ldlSelects = document.querySelectorAll('.ldl-status-select');
        const ltrSelects = document.querySelectorAll('.ltr-status-select');
        const slbSelects = document.querySelectorAll('.slb-status-select');
        const selSelects = document.querySelectorAll('.sel-status-select');
        
        const totalMensagens = paymentBadges.length + r2Selects.length + ldlSelects.length + ltrSelects.length + slbSelects.length + selSelects.length;
        
        // Atualizar contador total
        document.getElementById('total-messages-count').textContent = totalMensagens;
        
        console.log(`Total de mensagens: ${totalMensagens}`);
    }

    // Função para marcar todas as mensagens SLB como efetivadas
    function marcarTodasSLBEfetivadas() {
        document.querySelectorAll('.slb-status-select').forEach(select => {
            select.value = 'Efetivado';
            select.style.backgroundColor = '#198754';
            select.style.color = '#ffffff';
            select.style.fontWeight = 'bold';
        });
        
        // Atualizar contador após mudança em lote
        atualizarContadorSLB();
        
        alert('✅ Todas as mensagens SLB foram marcadas como Efetivadas!');
    }
    
    // Função para alterar status individual de mensagem SLB
    function alterarStatusSLB(selectElement, messageId) {
        const status = selectElement.value;
        
        if (status === 'Efetivado') {
            selectElement.style.backgroundColor = '#198754';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'bold';
        } else {
            selectElement.style.backgroundColor = '#6c757d';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'normal';
        }
        
        // Atualizar contador após mudança de status
        atualizarContadorSLB();
        
        console.log(`Status da mensagem SLB ${messageId} alterado para: ${status}`);
    }

    // Função para marcar todas as mensagens SEL como efetivadas
    function marcarTodasSELEfetivadas() {
        document.querySelectorAll('.sel-status-select').forEach(select => {
            select.value = 'Efetivado';
            select.style.backgroundColor = '#198754';
            select.style.color = '#ffffff';
            select.style.fontWeight = 'bold';
        });
        
        // Atualizar contador após marcar todas
        atualizarContadorSEL();
        
        alert('✅ Todas as mensagens SEL foram marcadas como Efetivadas!');
    }

    // Função para alterar status individual de mensagem SEL
    function alterarStatusSEL(selectElement, messageId) {
        const status = selectElement.value;
        
        if (status === 'Efetivado') {
            selectElement.style.backgroundColor = '#198754';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'bold';
        } else {
            selectElement.style.backgroundColor = '#6c757d';
            selectElement.style.color = '#ffffff';
            selectElement.style.fontWeight = 'normal';
        }
        
        // Atualizar contador após mudança individual
        atualizarContadorSEL();
        
        console.log(`Status da mensagem SEL ${messageId} alterado para: ${status}`);
    }

    function forcarTudo() {
        console.log('🔴 FORÇANDO TUDO VERDE!');
        
        // FORÇAR STR da Nu Pagamentos
        const strs = ['STR0007', 'STR0006', 'STR0004', 'STR0008', 'STR0013', 'STR0025', 'STR0026'];
        strs.forEach(str => {
            const element = document.getElementById(`status-${str}`);
            if (element) {
                element.className = 'badge bg-success';
                element.innerHTML = '<i class="fas fa-check me-1"></i>Efetivado';
                console.log(`✅ ${str} → VERDE`);
            }
        });
        
        // FORÇAR LPI0001
        const lpi = document.getElementById('status-LPI0001');
        if (lpi) {
            lpi.className = 'badge bg-success';
            lpi.innerHTML = '<i class="fas fa-check me-1"></i>Efetivado';
            console.log('✅ LPI0001 → VERDE');
        }
        
        // REMOVIDO: não forçar R2 da Nu Financeira para evitar inconsistência
        
        alert('TUDO FORÇADO PARA VERDE! Confira o dashboard.');
    }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        // Função para carregar dados
        async function loadData() {
            const spinner = document.getElementById('loading-spinner');
            const refreshIcon = document.getElementById('auto-refresh-icon');
            
            if (spinner) spinner.style.display = 'inline-block';
            if (refreshIcon) refreshIcon.classList.add('fa-spin');

            try {
                // Buscar todos os dados (para contadores corretos)
                const response = await fetch('/api/data');
                const messages = await response.json();
                
                console.log('📊 Dados recebidos (all):', messages);
                
                // Atualizar contadores (STR peso 2, exceto STR0013/STR0010 peso 1)
                let strCount = 0;
                let lpiCount = 0;
                let smeCount = 0;
                let rcoCount = 0;
                let ldlCount = 0;
                let ltrCount = 0;
                let slbCount = 0;
                
                messages.forEach(msg => {
                    if (msg.message_code.startsWith('STR') && !msg.message_code.endsWith('R2')) {
                        // STR0013 e STR0010 têm peso 1, outras STR têm peso 2
                        if (msg.message_code === 'STR0013' || msg.message_code === 'STR0010') {
                            strCount += 1;
                        } else {
                            strCount += 2;
                        }
                    }
                    else if (msg.message_code.startsWith('LPI')) lpiCount++;
                    else if (msg.message_code.startsWith('SME')) smeCount++;
                    else if (msg.message_code.startsWith('RCO')) rcoCount++;
                    else if (msg.message_code.startsWith('LDL')) ldlCount++;
                    else if (msg.message_code.startsWith('LTR')) ltrCount++;
                    else if (msg.message_code.startsWith('SLB')) slbCount++;
                });
                
                document.getElementById('nupag-counter').textContent = strCount;
                document.getElementById('nufin-counter').textContent = lpiCount;
                document.getElementById('nuinvest-counter').textContent = smeCount;
                document.getElementById('rco-counter').textContent = rcoCount;
                
                console.log(`📊 Contadores: STR=${strCount}, LPI=${lpiCount}, SME=${smeCount}, RCO=${rcoCount}`);
                
                // NÃO RESETAR - manter status verdes
                // Comentado para não perder status efetivados
                // allMessages.forEach(msgCode => {
                //     const statusElement = document.getElementById(`status-${msgCode}`);
                //     if (statusElement && !statusElement.classList.contains('bg-success')) {
                //         statusElement.className = 'badge bg-secondary';
                //         statusElement.textContent = 'Pendente';
                //     }
                // });
                
                // Atualização baseada na coluna E (catalog_code)
                function marcarVerde(elementId) {
                    const el = document.getElementById(elementId);
                    if (el) {
                        el.className = 'badge bg-success';
                        el.innerHTML = '<i class="fas fa-check me-1"></i>Efetivado';
                    }
                }

                const mensagensSucesso = messages.filter(m => m && m.status && m.status.toLowerCase() === 'sucesso' && m.message_code);
                const msgsNupag = mensagensSucesso.filter(m => (m.catalog_code || '').toLowerCase() === 'trocadecatalagonupag');
                const msgsNufin = mensagensSucesso.filter(m => (m.catalog_code || '').toLowerCase() === 'trocadecatalagonufin');
                const msgsNuinv = mensagensSucesso.filter(m => (m.catalog_code || '').toLowerCase() === 'trocadecatalagonuinvest');
                const hasNupag = msgsNupag.length > 0;
                const hasNufin = msgsNufin.length > 0;
                const hasNuinv = msgsNuinv.length > 0;

                // trocadecatalagonupag → STR, LPI, SME, LDL, LTR, SLB (Nu Pagamentos)
                msgsNupag.forEach(m => {
                    const code = m.message_code;
                    if (code.startsWith('STR') && !code.endsWith('R2')) {
                        marcarVerde(`status-${code}`);
                        console.log(`🟢 Nu Pagamentos STR: ${code}`);
                    }
                    if (code.startsWith('LPI') || code.startsWith('SME') || code.startsWith('LDL') || code.startsWith('LTR') || code.startsWith('SLB')) {
                        marcarVerde(`status-${code}`);
                        console.log(`🟢 Nu Pagamentos ${code.substring(0,3)}: ${code}`);
                    }
                });
                // Removido fallback - só marca o que está na planilha

                // trocadecatalagonufin → STR, RCO, LDL, LTR, SLB (Nu Financeira)
                msgsNufin.forEach(m => {
                    const code = m.message_code;
                    if (code.startsWith('STR') && !code.endsWith('R2')) {
                        marcarVerde(`status-nufin-${code}`);
                        console.log(`🟢 Nu Financeira STR: ${code}`);
                    }
                    if (code.startsWith('RCO') || code.startsWith('LDL') || code.startsWith('LTR') || code.startsWith('SLB')) {
                        if (code.startsWith('RCO')) {
                            marcarVerde(`status-${code}`);
                        } else {
                            marcarVerde(`status-nufin-${code}`);
                        }
                        console.log(`🟢 Nu Financeira ${code.substring(0,3)}: ${code}`);
                    }
                });
                // Removido fallback - só marca o que está na planilha

                // trocadecatalagonuinvest → STR, LDL, LTR, SLB (Nu Invest)
                msgsNuinv.forEach(m => {
                    const code = m.message_code;
                    if (code.startsWith('STR') && !code.endsWith('R2')) {
                        marcarVerde(`status-nuinvest-${code}`);
                        console.log(`🟢 Nu Invest STR: ${code}`);
                    }
                    if (code.startsWith('LDL') || code.startsWith('LTR') || code.startsWith('SLB')) {
                        marcarVerde(`status-nuinvest-${code}`);
                        console.log(`🟢 Nu Invest ${code.substring(0,3)}: ${code}`);
                    }
                });
                // Removido fallback - só marca o que está na planilha
                
                // Atualizar timestamp
                const lastUpdate = document.getElementById('last-update');
                if (lastUpdate) {
                    lastUpdate.textContent = new Date().toLocaleTimeString('pt-BR');
                }
                
                // Atualizar contadores após carregar dados
                setTimeout(() => {
                    atualizarContadorPayment();
                    atualizarContadorR2();
                }, 100);
                
                console.log('✅ Dashboard atualizado!');
                
            } catch (error) {
                console.error('❌ Erro ao carregar dados:', error);
                const status = document.getElementById('auto-refresh-status');
                if (status) {
                    status.textContent = 'Auto-refresh: erro';
                    status.style.color = '#ff6b6b';
                }
            } finally {
                if (spinner) spinner.style.display = 'none';
                if (refreshIcon) refreshIcon.classList.remove('fa-spin');
            }
        }

        // Lista de todas as mensagens monitoradas (sem R2)
        const allMessages = [
            'STR0007', 'STR0006', 'STR0004', 'STR0008', 'STR0010', 'STR0013', 'STR0025', 'STR0026',
            'LPI0001', 'LPI0002', 'LPI0003', 'LPI0004', 'LPI0005',
            'SME0001', 'SME0002', 'SME0003',
            'RCO0010', 'RCO0011',
            'LDL0001', 'LDL0003', 'LDL0004', 'LDL0005R2', 'LDL0009R2', 'LDL0021', 'LDL0022', 'LDL0022R2', 'LDL0024', 'LDL0028', 'LDL0029',
            'LTR0001', 'LTR0004', 'LTR0005R2', 'LTR0006',
            'SLB0001', 'SLB0002', 'SLB0005',
            'SEL1056', 'SEL1611', 'SEL1054', 'SEL1069'
        ];
        
        // Lista das mensagens Nu Financeira (mesmas STR mas com IDs diferentes)
        const nuFinanceiraMessages = [
            'STR0007', 'STR0006', 'STR0004', 'STR0008', 'STR0013', 'STR0025', 'STR0026', 'STR0047', 'STR0052', 'STR0010'
        ];
        
        // Lista das mensagens Nu Invest (mesmas STR mas com IDs diferentes)
        const nuInvestMessages = [
            'STR0007', 'STR0006', 'STR0004', 'STR0008', 'STR0013', 'STR0025', 'STR0010'
        ];
        
        // Listas R2 removidas



        // Variável para controlar o auto-refresh
        let autoRefreshInterval;
        
        // Função para iniciar auto-refresh
        function startAutoRefresh() {
            // Limpar interval anterior se existir
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
            
            // Auto-refresh a cada 5 segundos (mais rápido para tempo real)
            autoRefreshInterval = setInterval(() => {
                console.log('🔄 Auto-refresh executando...');
                loadData();
            }, 5000);
            
            console.log('✅ Auto-refresh iniciado (a cada 5 segundos)');
        }
        
        // Carregar dados iniciais
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Dashboard carregado - iniciando...');
            loadData();
            startAutoRefresh();
            
            // Inicializar contadores de todas as abas
            setTimeout(() => {
                atualizarContadorPayment();
                atualizarContadorR2();
                atualizarContadorLDL();
                atualizarContadorLTR();
                atualizarContadorSLB();
                atualizarContadorSEL();
                atualizarContadorTotal();
            }, 1000);
        });
    </script>

    <!-- Botões de Links Úteis -->
    <div class="container mt-4 mb-3">
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="https://docs.google.com/document/d/1tpuj8Sm5YfQc9jphadvnFrr4JifouCXnIp8edNotbWU/edit?tab=t.0" 
                   target="_blank" 
                   class="btn btn-outline-primary btn-sm me-3" 
                   style="font-size: 0.8rem; padding: 0.4rem 0.8rem;">
                    <i class="fab fa-google-drive me-1"></i>
                    Modelo Troca de Catálogo
                </a>
                <a href="https://docs.google.com/spreadsheets/d/17aWoS5Q8x-1I5VY8Sr1re2aA3GhauCLSMZeaklSne18/edit?gid=710847430#gid=710847430" 
                   target="_blank" 
                   class="btn btn-outline-success btn-sm" 
                   style="font-size: 0.8rem; padding: 0.4rem 0.8rem;">
                    <i class="fas fa-table me-1"></i>
                    Planilha Base
                </a>
            </div>
        </div>
    </div>
</body>
</html>
